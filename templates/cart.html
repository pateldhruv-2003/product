<!-- <h2>Shopping  cart</h2>

<p>{{message}}</p>
{% for key, item in cart.items %}
  

    <div>
        <img src="{{item.image }}" width="80">
        <h3>{{item.name }}</h3>
        <p>price: {{ item.price }}</p>
      <div>  
            
            <a href="{% url 'update_cart' key 'increase' %}">+</a>
            <p>Quntity:{{ item.quantity }}</p>
            <a href="{% url 'update_cart' key 'decrease' %}">-</a>
           
      </div>
      <div>

        <form action="{%url 'delete_from_cart' key %}" method="post">
          {% csrf_token %}
          <button type="submit" onclick="return confirm('Do you want to remove record??')">Remove</button>

        </form>
      </div>


        
    </div>
    
{% endfor %} 

<p><strong>Total:</strong>{{total_amount}}</p>
-->



<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <style>
    a{
      text-decoration: none;
    }
  </style>
</head>
<body>

  <h2 class="ms-5">Shopping  cart</h2>
  <div class="container">
  <div class="row">  
  <table class="table">
    <thead>
      <tr>
        <th>IMAGE</th>
        <th scope="col">PRODUCT NAME</th>
        <th scope="col">PRICE PER UNIT</th>
        <th scope="col">QUNTITY</th>
        <th>REMOVE</th>
        
      </tr>
    </thead>
    <tbody class="table-group-divider">
    <p>{{message}}</p>
    {% for key, item in cart.items %}
            
    <tr>
    
      <td><img src="{{item.image }}" width="50"></td>
      <td>{{item.name }}</td>
      <td>{{ item.price }}</td>                
      <td>
        <a href="{% url 'update_cart' key 'increase' %}">+</a>

          {{ item.quantity }}

        <span><a href="{% url 'update_cart' key 'decrease' %}">-</a></span>
       </td>
      <td>
        <form action="{%url 'delete_from_cart' key %}" method="post">
          {% csrf_token %}
          <button type="submit" onclick="return confirm('Do you want to remove record??')">Remove</button>

        </form>
    
      </td>
      
    </tr>
    {% endfor %}
    </tbody>
    </table>

    <p><strong>Total:</strong>{{total_amount}}</p>
    <div class="text-center mt-4">
      <button class="btn btn-success" onclick="payNow()">Pay Now</button>
    </div>


    </div>
    </div>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>


    <script>
      function payNow() {
        var totalAmount = parseInt("{{ total_amount|floatformat:0 }}");

        var options = {
          "key": "rzp_test_kz1ReR2tHdXD6v",  // Replace with your Razorpay key
          "amount": totalAmount * 100,  // Amount in paise
          "currency": "INR",
          "name": "Your Store",
          "description": "Cart Payment",
          "handler": function (response){
              alert("Payment Successful! Razorpay ID: " + response.razorpay_payment_id);
              // Optionally send response.razorpay_payment_id to Django for verification
          },
          "prefill": {
            "name": "Test User",
            "email": "test@example.com"
          },
          "theme": {
            "color": "#3399cc"
          }
        };

        var rzp = new Razorpay(options);
        rzp.open();
      }
    </script>

  
</body>
</html>